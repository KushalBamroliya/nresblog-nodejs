<div id="admin-content">
  <div class="container">
    <div class="row">
      <% if (query && query.error) { %>
      <div class="alert alert-danger"><%= query.error %></div>
      <% } %> <% if (query && query.success) { %>
      <div class="alert alert-success"><%= query.success %></div>
      <% } %>
      <div class="col-md-10">
        <h1 class="admin-heading"><i class="fa fa-users"></i> All Users</h1>
      </div>
      <div class="col-md-2">
        <a class="add-new" href="/admin/add-user">add user</a>
      </div>
      <div class="col-md-12">
        <table class="content-table">
          <thead>
            <th>S.No.</th>
            <th>Full Name</th>
            <th>User Name</th>
            <th>Role</th>
            <th>Edit</th>
            <th>Delete</th>
          </thead>
          <tbody>
            <% if (users && users.length > 0) { %> <% users.forEach((user,
            index) => { %>
            <tr>
              <td class="id"><%= index + 1 %></td>
              <td><%= user.fullname %></td>
              <td><%= user.username %></td>
              <td><%= user.role %></td>
              <td class="edit">
                <a href="/admin/update-user/<%= user._id %>">
                  <i
                    class="fa-regular fa-pen-to-square text-secondary-emphasis"
                  ></i>
                </a>
              </td>
              <td class="delete">
                <a
                  href="/admin/delete-user/<%= user._id %>"
                  onclick="return confirm('Are you sure you want to delete this user?')"
                >
                  <i
                    class="fa-regular fa-trash-can text-secondary-emphasis"
                  ></i>
                </a>
              </td>
            </tr>
            <% }); %> <% } else { %>
            <tr>
              <td colspan="6" class="text-center">No users found</td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  if (window.location.search) {
    const url = window.location.origin + window.location.pathname;
    window.history.replaceState({}, document.title, url);
  }
</script>

